{# templates/inventory/equipment/_table.html #}

{% if object_list %}
<div class="overflow-x-auto rounded-xl border border-gray-200">
  <table class="min-w-full divide-y divide-gray-200 text-sm">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-3 py-2 text-left font-semibold text-gray-700">Equipo</th>
        <th class="px-3 py-2 text-left font-semibold text-gray-700">Cantidad</th>
        <th class="px-3 py-2 text-left font-semibold text-gray-700">Año compra</th>
        <th class="px-3 py-2 text-left font-semibold text-gray-700">Origen</th>
        <th class="px-3 py-2 text-left font-semibold text-gray-700">% Utilización</th>
        <th class="px-3 py-2 text-left font-semibold text-gray-700">Energía</th>
        <th class="px-3 py-2 text-right font-semibold text-gray-700">Acciones</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-100 bg-white">
      {% for e in object_list %}
      <tr>
        <td class="px-3 py-2">{{ e.name }}</td>
        <td class="px-3 py-2">{{ e.quantity|default:"-" }}</td>
        <td class="px-3 py-2">{{ e.purchase_year|default:"-" }}</td>
        <td class="px-3 py-2">{{ e.purchase_origin|default:"-" }}</td>
        <td class="px-3 py-2">{{ e.utilization_pct|default:"-" }}</td>
        <td class="px-3 py-2">
          {% if e.energy_sources.all %}
          {{ e.energy_sources.all|join:", " }}
          {% else %}-{% endif %}
        </td>
        <td class="px-4 py-3 text-right">
          <div class="flex items-center justify-end gap-2">
            <!-- Editar (verde) -->
            <button type="button" class="inline-flex items-center justify-center rounded-full p-2
             border border-green-200 text-green-700 bg-green-50
             hover:bg-green-100 focus:outline-none" title="Editar equipo" aria-label="Editar" data-loading-btn
              hx-get="{% url 'inventory:equipment_update' e.id %}" hx-target="#modal" hx-swap="innerHTML"
              hx-indicator="#global-spinner">
              <!-- Pencil icon -->
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 20h9" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L8 18l-4 1 1-4L16.5 3.5Z" stroke="currentColor" stroke-width="2"
                  fill="none" stroke-linejoin="round" />
              </svg>
              <span class="sr-only">Editar</span>
            </button>

            <!-- Eliminar (rojo) -->
            <button type="button" class="inline-flex items-center justify-center rounded-full p-2
             border border-red-200 text-red-700 bg-red-50
             hover:bg-red-100 focus:outline-none" title="Eliminar equipo" aria-label="Eliminar" data-loading-btn
              hx-post="{% url 'inventory:equipment_delete' e.id %}" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
              hx-confirm="¿Eliminar este equipo?" hx-indicator="#global-spinner">
              <!-- Trash icon -->
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M3 6h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2" />
                <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" stroke="currentColor" stroke-width="2" />
                <path d="M10 11v6M14 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
              <span class="sr-only">Eliminar</span>
            </button>
          </div>
        </td>

      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="rounded-lg border border-dashed p-6 text-center text-gray-500">
  Aún no hay equipos registrados.
</div>
{% endif %}