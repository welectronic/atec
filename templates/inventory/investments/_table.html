{# templates/inventory/investments/_table.html #}

{% if object_list %}
  <div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 overflow-hidden">
    <table class="min-w-full divide-y divide-gray-100 text-sm">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-3 py-2 text-left font-semibold text-gray-700">Fecha/Año</th>
          <th class="px-3 py-2 text-left font-semibold text-gray-700">Categoría</th>
          <th class="px-3 py-2 text-left font-semibold text-gray-700">Ítem</th>
          <th class="px-3 py-2 text-right font-semibold text-gray-700">Monto (COP)</th>
          <th class="px-3 py-2 text-left font-semibold text-gray-700">Motivo</th>
          <th class="px-3 py-2 text-left font-semibold text-gray-700">Fuente</th>
          <th class="px-3 py-2 text-left font-semibold text-gray-700">Equipo</th>
          <th class="px-3 py-2 text-right font-semibold text-gray-700">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100 bg-white">
        {% for i in object_list %}
          <tr>
            <td class="px-3 py-2">{{ i.investment_date|date:"Y-m-d"|default:i.investment_year|default:"-" }}</td>
            <td class="px-3 py-2">{{ i.get_category_display }}</td>
            <td class="px-3 py-2">{{ i.item_name }}</td>
            <td class="px-3 py-2 text-right">{{ i.amount_cop|floatformat:0 }}</td>
            <td class="px-3 py-2">{{ i.get_motive_display }}</td>
            <td class="px-3 py-2">{{ i.get_funding_source_display }}</td>
            <td class="px-3 py-2">{{ i.equipment|default:"-" }}</td>
            <td class="px-4 py-2 text-right">
              <div class="flex items-center justify-end gap-2">
                <button type="button" class="inline-flex items-center justify-center rounded-full p-2 border border-green-200 text-green-700 bg-green-50 hover:bg-green-100" title="Editar" hx-get="{% url 'inventory:investment_update' i.id %}" hx-target="#modal" hx-swap="innerHTML">
                  <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 20h9" stroke="currentColor" stroke-width="2" stroke-linecap="round" /><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L8 18l-4 1 1-4L16.5 3.5Z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round" /></svg>
                </button>
                <button type="button" class="inline-flex items-center justify-center rounded-full p-2 border border-red-200 text-red-700 bg-red-50 hover:bg-red-100" title="Eliminar" hx-post="{% url 'inventory:investment_delete' i.id %}" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' hx-confirm="¿Eliminar esta inversión?">
                  <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 6h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" /><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2" /><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" stroke="currentColor" stroke-width="2" /><path d="M10 11v6M14 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" /></svg>
                </button>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <div class="rounded-xl border border-dashed border-gray-300 bg-white p-10 text-center">
    <p class="text-gray-600">Aún no hay inversiones registradas.</p>
    <div class="mt-4">
      <button type="button" class="inline-flex items-center rounded-lg bg-atec-primary-600 px-4 py-2 text-sm font-medium text-white hover:bg-atec-primary-700" hx-get="{% url 'inventory:investment_create' company.id %}" hx-target="#modal" hx-swap="innerHTML">+ Registrar inversión</button>
    </div>
  </div>
{% endif %}

